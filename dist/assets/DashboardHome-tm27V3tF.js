import{c as V,r as b,aM as cs,aN as we,j as e,D as qe,f as Je,g as Xe,h as Ze,l as y,a7 as ds,B as M,C as A,a as $,b as W,ag as xe,d as P,v as je,R as os,H as Te,J as Fe,K as le,M as Z,N as Le,O as H,a1 as Ie,a2 as $e,a3 as We,a4 as Ge,w as xs,ah as ms,e as Qe,af as se,E as hs,T as ge,u as us,aO as _e,G as gs,a8 as js,S as ps,s as Oe,aP as vs,au as oe,i as fs,Q as I,m as bs,n as Ns,o as ke,p as Ce}from"./index-B0KDE8pz.js";import{m as ne,n as ys}from"./domainMatching-DnE2bFev.js";import{S as ks}from"./scroll-area-BWfeK-bJ.js";import{c as ee,P as Cs,R as zs,a as ws,C as Ss,X as Ds,Y as Ms,T as Ts,L as Fs,b as Ye}from"./LineChart-B1G-hv-I.js";import{C as De}from"./circle-x-CYTj_F-g.js";import{C as Ls}from"./circle-alert-BColZMCl.js";import{D as me}from"./dollar-sign-DoT4Nf7I.js";import{T as Re}from"./trending-down-CiL3vurg.js";import{M as Rs,S as As}from"./smartphone-CW61Outg.js";import{C as Ps}from"./credit-card-B7gn-3C-.js";import{C as Me}from"./clock-7gicNhvX.js";import{C as Bs}from"./calendar-C6HWCdHQ.js";import{C as Es}from"./calculator-DiLoS-ef.js";import{ExcelDataManager as Is}from"./ExcelDataManager-CTkuXnnh.js";import{S as He}from"./separator-CqtGMYUT.js";import{C as $s}from"./chevron-down-BiFBo6-a.js";import{E as Ws}from"./eye-yIxuUw_s.js";import"./progress-BDUzr-gD.js";import"./xlsx-D_0l8YDs.js";import"./file-spreadsheet-CfN0RQj_.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=V("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=V("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=V("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=V("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=V("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=V("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=V("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=V("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=V("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=V("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=V("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=V("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Se=[{id:"systemStatus-1",type:"systemStatus",title:"Sistem Durumu",enabled:!0,pinned:!0,order:0,size:"small"},{id:"customers-1",type:"customers",title:"MÃ¼ÅŸteriler Ã–zeti",enabled:!0,pinned:!1,order:1,size:"medium"},{id:"bankpf-1",type:"bankpf",title:"Banka/PF Ã–zeti",enabled:!0,order:2,size:"medium"},{id:"bankPFMembers-1",type:"bankPFMembers",title:"Banka/PF ÃœÄ°Y Ã–zeti",enabled:!0,order:3,size:"medium"},{id:"products-1",type:"products",title:"ÃœrÃ¼n Ã–zeti",enabled:!1,order:4,size:"medium"},{id:"revenue-1",type:"revenue",title:"Gelir Ã–zeti",enabled:!1,order:5,size:"medium"},{id:"customerGrowth-1",type:"customerGrowth",title:"MÃ¼ÅŸteri BÃ¼yÃ¼me Analizi",enabled:!1,order:6,size:"medium"},{id:"sectorDiversity-1",type:"sectorDiversity",title:"SektÃ¶r Ã‡eÅŸitliliÄŸi",enabled:!1,order:7,size:"medium"},{id:"mccDiversity-1",type:"mccDiversity",title:"MCC Ã‡eÅŸitliliÄŸi",enabled:!1,order:8,size:"medium"},{id:"topCustomers-1",type:"topCustomers",title:"Top 10 MÃ¼ÅŸteriler",enabled:!0,order:9,size:"large"}];function qs(x){switch(x){case"customers":return"MÃ¼ÅŸteriler Ã–zeti";case"bankpf":return"Banka/PF Ã–zeti";case"bankPFMembers":return"Banka/PF ÃœÄ°Y Ã–zeti";case"bankPFUiySummary":return"ÃœÄ°Y Ä°cmal Tablosu";case"products":return"ÃœrÃ¼n Ã–zeti";case"revenue":return"Gelir Ã–zeti";case"customerGrowth":return"MÃ¼ÅŸteri BÃ¼yÃ¼me Analizi";case"sectorDiversity":return"SektÃ¶r Ã‡eÅŸitliliÄŸi";case"mccDiversity":return"MCC Ã‡eÅŸitliliÄŸi";case"bankPerformance":return"Banka Performans Analizi";case"revenueTrend":return"Gelir Trend Analizi";case"salesRepPerformance":return"SatÄ±ÅŸ Temsilcisi PerformansÄ±";case"riskDashboard":return"Risk Dashboard'u";case"topCustomers":return"Top 10 MÃ¼ÅŸteriler";case"systemStatus":return"Sistem Durumu";case"subscriptionRevenue":return"Abone Hizmet Bedeli Ã–zeti";case"deviceRevenueRatio":return"Cihaz / Aidat Bedeli OranÄ±";default:return"Widget"}}function Js(x){let N=x.map(C=>C.type==="topCustomers"&&C.size!=="large"?{...C,size:"large"}:C);if(!N.some(C=>C.type==="bankPFMembers")){const C=N.findIndex(w=>w.type==="bankpf"),k=C>=0?C+1:3,S={id:"bankPFMembers-1",type:"bankPFMembers",title:"Banka/PF ÃœÄ°Y Ã–zeti",enabled:!0,order:k,size:"medium"};N.splice(k,0,S),N=N.map((w,f)=>({...w,order:f}))}return N}function Xs(){const[x,N]=b.useState(()=>{const d=cs("dashboardWidgets",Se),n=Js(d);return JSON.stringify(d)!==JSON.stringify(n)&&we("dashboardWidgets",n),n});b.useEffect(()=>{const d=setTimeout(()=>{we("dashboardWidgets",x)},500);return()=>clearTimeout(d)},[x]);const v=b.useCallback(d=>{N(n=>{const r=n.filter(t=>t.type===d),m=`${d}-${r.length+1}`,a=Math.max(...n.map(t=>t.order),-1)+1,s=d==="topCustomers"?"large":"medium",l={id:m,type:d,title:qs(d),enabled:!0,order:a,size:s};return[...n,l]})},[]),C=b.useCallback((d,n)=>{N(r=>r.map(m=>m.id===d?{...m,size:n}:m))},[]),k=b.useCallback(d=>{N(n=>n.filter(r=>r.id!==d))},[]),S=b.useCallback(d=>{N(n=>n.map(r=>r.id===d&&r.pinned&&r.enabled?r:r.id===d?{...r,enabled:!r.enabled}:r))},[]),w=b.useCallback(d=>{N(n=>{const r=n.map(s=>{if(s.id===d){const l=!s.pinned;return{...s,pinned:l,enabled:l?!0:s.enabled}}return s}),m=r.filter(s=>s.pinned).sort((s,l)=>s.order-l.order),a=r.filter(s=>!s.pinned).sort((s,l)=>s.order-l.order);return[...m,...a].map((s,l)=>({...s,order:l}))})},[]),f=b.useCallback(d=>{N(n=>d.map((r,m)=>{const a=n.find(s=>s.id===r);return a?{...a,order:m}:null}).filter(r=>r!==null))},[]),j=b.useCallback(()=>{N(Se),we("dashboardWidgets",Se)},[]),u=b.useCallback(d=>{N(n=>{const r=[...n].sort((s,l)=>s.order-l.order),m=r.findIndex(s=>s.id===d);if(m<=0)return n;const a=[...r];return[a[m-1],a[m]]=[a[m],a[m-1]],a.map((s,l)=>({...s,order:l}))})},[]),h=b.useCallback(d=>{N(n=>{const r=[...n].sort((s,l)=>s.order-l.order),m=r.findIndex(s=>s.id===d);if(m<0||m>=r.length-1)return n;const a=[...r];return[a[m],a[m+1]]=[a[m+1],a[m]],a.map((s,l)=>({...s,order:l}))})},[]);return{widgets:x,addWidget:v,removeWidget:k,toggleWidget:S,togglePinWidget:w,reorderWidgets:f,resetWidgets:j,updateWidgetSize:C,moveWidgetUp:u,moveWidgetDown:h}}function U({isOpen:x,onClose:N,title:v,items:C}){return e.jsx(qe,{open:x,onOpenChange:N,children:e.jsxs(Je,{className:"max-w-3xl max-h-[85vh] w-[95vw] sm:w-full",children:[e.jsxs(Xe,{className:"pr-10",children:[e.jsx(Ze,{className:"text-left pr-8",children:v}),e.jsxs(y,{variant:"ghost",size:"icon",onClick:N,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Kapat"})]})]}),e.jsx(ks,{className:"max-h-[calc(85vh-120px)] pr-4",children:e.jsx("div",{className:"space-y-2 pb-2",children:C.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"GÃ¶sterilecek veri bulunamadÄ±"}):C.map((k,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 bg-blue-100 text-blue-700 rounded-full flex-shrink-0",children:e.jsx("span",{className:"text-sm",children:S+1})}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[k.icon&&e.jsx("div",{className:"flex-shrink-0",children:k.icon}),e.jsx("span",{className:"truncate",title:k.label,children:k.label})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"whitespace-nowrap",children:k.value}),k.badge&&e.jsx(M,{variant:"outline",className:`whitespace-nowrap ${k.className||""}`,children:k.badge})]})]},S))})})]})})}function Zs({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=x.length,u=x.filter(s=>s.durum==="Aktif").length,h=x.filter(s=>s.durum==="Pasif").length,d=s=>{var c;if(s.musteriTipi)return s.musteriTipi;const i=(((c=s.serviceFeeSettings)==null?void 0:c.deviceSubscriptions)||[]).filter(g=>g.isActive).length;return i>=100?"Enterprise":i>=51?"Large":i>=21?"Medium":i>=6?"Small":"Micro"},n=x.map(s=>({...s,effectiveCategory:d(s)})),r={enterprise:n.filter(s=>s.effectiveCategory==="Enterprise").length,large:n.filter(s=>s.effectiveCategory==="Large").length,medium:n.filter(s=>s.effectiveCategory==="Medium").length,small:n.filter(s=>s.effectiveCategory==="Small").length,micro:n.filter(s=>s.effectiveCategory==="Micro").length};x.filter(s=>{var c,g;const t=(((g=(c=s.serviceFeeSettings)==null?void 0:c.deviceSubscriptions)==null?void 0:g.filter(z=>z.isActive))||[]).map(z=>z.deviceSerialNumber).filter(Boolean);if(t.length===0)return!1;const i=s.domain||s.guncelMyPayterDomain;return i?N.some(z=>!t.includes(z.serialNumber)||!z.domain?!1:ne(z.domain,i,s.ignoreMainDomain||!1)):!1}).length,x.filter(s=>s.linkedBankPFIds&&s.linkedBankPFIds.length>0).length;const m=s=>{switch(s){case"Enterprise":return"bg-purple-100 text-purple-800 border-purple-300";case"Large":return"bg-blue-100 text-blue-800 border-blue-300";case"Medium":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"Small":return"bg-cyan-100 text-cyan-800 border-cyan-300";case"Micro":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},a=()=>{const s={Enterprise:1,Large:2,Medium:3,Small:4,Micro:5},t=[...n].sort((i,c)=>{const g=(s[i.effectiveCategory]||999)-(s[c.effectiveCategory]||999);return g!==0?g:(i.cariAdi||"").localeCompare(c.cariAdi||"","tr")}).map((i,c)=>{var z,p;const g=((p=(z=i.serviceFeeSettings)==null?void 0:z.deviceSubscriptions)==null?void 0:p.filter(D=>D.isActive))||[];return{label:i.cariAdi||"Ä°simsiz MÃ¼ÅŸteri",value:`${g.length} cihaz`,badge:i.effectiveCategory,className:m(i.effectiveCategory)}});f({title:"TÃ¼m MÃ¼ÅŸteriler - BÃ¼yÃ¼klÃ¼k Kategorisine GÃ¶re",items:t}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-blue-600",size:20}),"MÃ¼ÅŸteriler Ã–zeti"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:j}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:u}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-600",children:h}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Pasif"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"BÃ¼yÃ¼klÃ¼k DaÄŸÄ±lÄ±mÄ±"}),x.length>0&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:a,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",x.length,")"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Micro (1-5) â€¢ Small (6-20) â€¢ Medium (21-50) â€¢ Large (51-100) â€¢ Enterprise (100+)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-purple-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Enterprise (100+)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-purple-700",children:r.enterprise}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(r.enterprise/j*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Large (51-99)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-blue-700",children:r.large}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(r.large/j*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-indigo-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Medium (21-50)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-indigo-700",children:r.medium}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(r.medium/j*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-cyan-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Small (6-20)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-cyan-700",children:r.small}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(r.small/j*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Micro (0-5)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-gray-700",children:r.micro}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(r.micro/j*100):0,"%"]})]})]})]})]})]})})]})]})}function Qs({bankPFRecords:x,banks:N,epkList:v,okList:C}){const[k,S]=b.useState(!0),[w,f]=b.useState(!1),[j,u]=b.useState({title:"",items:[]}),h=x.length,d=x.filter(c=>c.durum==="Aktif").length,n=x.filter(c=>c.durum==="Pasif").length,r={banka:x.filter(c=>c.kategori==="Banka").length,pf:x.filter(c=>c.kategori==="Ã–deme KuruluÅŸu").length,efk:x.filter(c=>c.kategori==="Elektronik Para KuruluÅŸu").length},m=x.filter(c=>c.tabelaRecords&&c.tabelaRecords.length>0).length,a=x.reduce((c,g)=>{var z;return c+(((z=g.tabelaRecords)==null?void 0:z.length)||0)},0),s=x.reduce((c,g)=>{var z;return c+(((z=g.tabelaRecords)==null?void 0:z.reduce((p,D)=>p+(D.toplamCihazSayisi||0),0))||0)},0),l=x.map(c=>{var g,z;return{name:c.kurulusAdi,tabelaCount:((g=c.tabelaRecords)==null?void 0:g.length)||0,deviceCount:((z=c.tabelaRecords)==null?void 0:z.reduce((p,D)=>p+(D.toplamCihazSayisi||0),0))||0}}).filter(c=>c.tabelaCount>0).sort((c,g)=>g.tabelaCount-c.tabelaCount),t=l.slice(0,6),i=()=>{const c=l.map((g,z)=>({label:g.name,value:`${g.deviceCount.toLocaleString("tr-TR")} cihaz`,badge:`${g.tabelaCount} grup`}));u({title:"En Fazla Tabela Grubuna Sahip Firmalar - TÃ¼m Liste",items:c}),f(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:w,onClose:()=>f(!1),title:j.title,items:j.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"text-purple-600",size:20}),"Banka/PF Ã–zeti"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>S(!k),className:"h-8 w-8 p-0",title:k?"Daralt":"GeniÅŸlet",children:k?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),k&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:h}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam KuruluÅŸ"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:d}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-600",children:n}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Pasif"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Kategori DaÄŸÄ±lÄ±mÄ±"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-purple-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Banka"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-purple-700",children:r.banka}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[h>0?Math.round(r.banka/h*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ã–deme KuruluÅŸu"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-blue-700",children:r.pf}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[h>0?Math.round(r.pf/h*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-indigo-50",children:[e.jsx("span",{className:"text-sm font-medium",children:"Elektronik Para KuruluÅŸu"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-indigo-700",children:r.efk}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[h>0?Math.round(r.efk/h*100):0,"%"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Tabela Durumu"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"TabelalÄ± Firma"})]}),e.jsxs("div",{className:"text-center p-3 bg-indigo-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:a}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tabela Grubu"})]}),e.jsxs("div",{className:"text-center p-3 bg-cyan-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:s.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam Cihaz"})]})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"En Fazla Tabela Grubuna Sahip 6 Firma"}),l.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:i,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",l.length,")"]})]})]}),e.jsx("div",{className:"space-y-2",children:t.map((c,g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-purple-100 text-purple-700 rounded-full text-xs font-bold",children:g+1}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[180px]",children:c.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"secondary",className:"text-xs",children:[c.tabelaCount," grup"]}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[c.deviceCount.toLocaleString("tr-TR")," cihaz"]})]})]},g))})]})]})})]})]})}const _s=os.memo(function({customers:N=[],bankPFRecords:v=[]}){const[C,k]=b.useState(!0),[S,w]=b.useState(!1),[f,j]=b.useState({title:"",items:[]}),u=b.useMemo(()=>{const n=[];return v.forEach(r=>{const m=N.filter(s=>{var l;return!!((l=s.linkedBankPFIds)!=null&&l.includes(r.id)||s.bankDeviceAssignments&&s.bankDeviceAssignments.length>0&&s.bankDeviceAssignments.some(i=>i.bankId===r.id||i.bankId===`bank-${r.id}`||i.bankId===`ok-epk-${r.id}`||i.bankId===`ok-ok-${r.id}`))}),a=m.reduce((s,l)=>{var i,c;const t=(i=l.bankDeviceAssignments)==null?void 0:i.find(g=>g.bankId===r.id||g.bankId===`bank-${r.id}`||g.bankId===`ok-epk-${r.id}`||g.bankId===`ok-ok-${r.id}`);return s+(((c=t==null?void 0:t.deviceIds)==null?void 0:c.length)||0)},0);m.length>0&&n.push({id:r.id,name:r.firmaUnvan||"Ä°simsiz",type:r.bankaOrPF==="Banka"?"Banka":r.odemeKurulusuTipi||"PF",customerCount:m.length,deviceCount:a,customers:m})}),n.sort((r,m)=>m.customerCount-r.customerCount)},[N,v]),h=b.useMemo(()=>{const n=u.length,r=u.reduce((t,i)=>t+i.customerCount,0),m=u.reduce((t,i)=>t+i.deviceCount,0),a=u.filter(t=>t.type==="Banka").length,s=u.filter(t=>t.type==="EPK").length,l=u.filter(t=>t.type==="Ã–K").length;return{totalBankPF:n,totalCustomers:r,totalDevices:m,bankaCount:a,epkCount:s,okCount:l}},[u]),d=()=>{const n=u.map(r=>({label:r.name,value:`${r.customerCount} mÃ¼ÅŸteri â€¢ ${r.deviceCount} cihaz`,badge:r.type}));j({title:"Banka/PF Ãœye Ã–zeti - TÃ¼m Liste",items:n}),w(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:S,onClose:()=>w(!1),title:f.title,items:f.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-indigo-600",size:20}),"Banka/PF ÃœÄ°Y Ã–zeti"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>k(!C),className:"h-8 w-8 p-0",title:C?"Daralt":"GeniÅŸlet",children:C?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),C&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-indigo-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl text-indigo-600",children:h.totalBankPF}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif Banka/PF"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl text-blue-600",children:h.totalCustomers}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam ÃœÄ°Y"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl text-purple-600",children:h.totalDevices}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam Cihaz"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Os,{className:"mx-auto text-green-600 mb-1",size:20}),e.jsx("div",{className:"text-lg text-green-700",children:h.bankaCount}),e.jsx("div",{className:"text-xs text-gray-600",children:"Banka"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(je,{className:"mx-auto text-blue-600 mb-1",size:20}),e.jsx("div",{className:"text-lg text-blue-700",children:h.epkCount}),e.jsx("div",{className:"text-xs text-gray-600",children:"EPK"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx(je,{className:"mx-auto text-orange-600 mb-1",size:20}),e.jsx("div",{className:"text-lg text-orange-700",children:h.okCount}),e.jsx("div",{className:"text-xs text-gray-600",children:"Ã–K"})]})]}),u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xe,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"HenÃ¼z Banka/PF ile iliÅŸkilendirilmiÅŸ mÃ¼ÅŸteri bulunmuyor."}),e.jsx("p",{className:"text-xs mt-2",children:"MÃ¼ÅŸteri modÃ¼lÃ¼nden Banka/PF atamasÄ± yapÄ±n."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm text-gray-700",children:"DetaylÄ± DaÄŸÄ±lÄ±m (Top 6)"}),u.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:d,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",u.length,")"]})]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto border rounded-lg",children:e.jsxs(Te,{children:[e.jsx(Fe,{className:"sticky top-0 bg-white z-10",children:e.jsxs(le,{children:[e.jsx(Z,{className:"w-[40%]",children:"Banka/PF"}),e.jsx(Z,{className:"text-center w-[15%]",children:"Tip"}),e.jsx(Z,{className:"text-center w-[20%]",children:"ÃœÄ°Y"}),e.jsx(Z,{className:"text-center w-[25%]",children:"Cihaz"})]})}),e.jsx(Le,{children:u.slice(0,6).map((n,r)=>e.jsxs(le,{className:r%2===0?"bg-gray-50/30":"bg-white",children:[e.jsx(H,{className:"font-medium text-sm",children:n.name}),e.jsx(H,{className:"text-center",children:n.type==="Banka"?e.jsx(M,{className:"bg-green-100 text-green-800 text-xs",children:"Banka"}):n.type==="EPK"?e.jsx(M,{className:"bg-blue-100 text-blue-800 text-xs",children:"EPK"}):e.jsx(M,{className:"bg-orange-100 text-orange-800 text-xs",children:"Ã–K"})}),e.jsx(H,{className:"text-center",children:e.jsx(Ie,{children:e.jsxs($e,{children:[e.jsx(We,{asChild:!0,children:e.jsx("span",{className:"cursor-help text-indigo-700",children:n.customerCount})}),e.jsx(Ge,{side:"left",className:"max-w-xs",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("p",{className:"font-semibold mb-1",children:"MÃ¼ÅŸteriler:"}),n.customers.slice(0,6).map((m,a)=>e.jsxs("div",{className:"text-gray-700",children:["â€¢ ",m.cariAdi]},a)),n.customers.length>6&&e.jsxs("p",{className:"text-gray-500 italic mt-1",children:["+",n.customers.length-6," daha..."]})]})})]})})}),e.jsx(H,{className:"text-center",children:n.deviceCount>0?e.jsx(Ie,{children:e.jsxs($e,{children:[e.jsx(We,{asChild:!0,children:e.jsxs("span",{className:"cursor-help text-purple-700",children:[e.jsx(Us,{className:"inline mr-1",size:14}),n.deviceCount]})}),e.jsx(Ge,{side:"left",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Cihaz DaÄŸÄ±lÄ±mÄ±:"}),n.customers.map((m,a)=>{var t,i;const s=(t=m.bankDeviceAssignments)==null?void 0:t.find(c=>c.bankId===n.id||c.bankId===`bank-${n.id}`||c.bankId===`ok-epk-${n.id}`||c.bankId===`ok-ok-${n.id}`),l=((i=s==null?void 0:s.deviceIds)==null?void 0:i.length)||0;return l===0?null:e.jsxs("div",{className:"flex justify-between gap-3 text-gray-700",children:[e.jsx("span",{children:m.cariAdi}),e.jsx("span",{className:"font-semibold",children:l})]},a)})]})})]})}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},n.id))})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-900",children:[e.jsx("strong",{children:"â„¹ï¸ Not:"})," Bu liste, MÃ¼ÅŸteri modÃ¼lÃ¼nde Banka/PF ile iliÅŸkilendirilmiÅŸ (linkedBankPFIds veya Banka/PF Kategorisi ile cihaz atanmÄ±ÅŸ) tÃ¼m mÃ¼ÅŸterileri gÃ¶sterir."]})})]})})]})]})});function et({customers:x,bankPFRecords:N,banks:v,epkList:C,okList:k}){const[S,w]=b.useState(!1),[f,j]=b.useState({title:"",items:[]}),u=b.useMemo(()=>{const r=[...N.filter(a=>a.firmaUnvan).map(a=>({id:a.id,name:a.firmaUnvan,source:"bankPF"})),...v.filter(a=>a.bankaAdi).map(a=>({id:a.id,name:a.bankaAdi,source:"definitions"})),...C.filter(a=>a.kurumAdi).map(a=>({id:a.id,name:a.kurumAdi,source:"definitions"})),...k.filter(a=>a.kurumAdi).map(a=>({id:a.id,name:a.kurumAdi,source:"definitions"}))].map(a=>{const s=x.filter(t=>{var i,c;return!!(a.source==="bankPF"&&((i=t.linkedBankPFIds)!=null&&i.includes(a.id))||(c=t.bankDeviceAssignments)!=null&&c.some(g=>g.bankId===a.id||g.bankId===`bank-${a.id}`||g.bankId===`ok-epk-${a.id}`||g.bankId===`ok-ok-${a.id}`))}),l=s.reduce((t,i)=>{var g,z;const c=(g=i.bankDeviceAssignments)==null?void 0:g.find(p=>p.bankId===a.id||p.bankId===`bank-${a.id}`||p.bankId===`ok-epk-${a.id}`||p.bankId===`ok-ok-${a.id}`);return t+(((z=c==null?void 0:c.deviceIds)==null?void 0:z.length)||0)},0);return{name:a.name,toplamUiy:s.length,toplamCihaz:l}}).filter(a=>a.toplamUiy>0).sort((a,s)=>s.toplamCihaz-a.toplamCihaz),m={toplamUiy:r.reduce((a,s)=>a+s.toplamUiy,0),toplamCihaz:r.reduce((a,s)=>a+s.toplamCihaz,0)};return{bankalar:r,genelToplam:m}},[N,v,C,k,x]),h=()=>{const d=u.bankalar.map((n,r)=>({label:n.name,value:`${n.toplamCihaz} cihaz`,badge:`${n.toplamUiy} ÃœÄ°Y`}));j({title:"ÃœÄ°Y Ä°cmal Tablosu - TÃ¼m Liste",items:d}),w(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:S,onClose:()=>w(!1),title:f.title,items:f.items}),e.jsxs(A,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(ee,{size:20}),"ÃœÄ°Y Ä°cmal Tablosu"]}),e.jsx(xs,{children:"Banka/PF bazÄ±nda toplam ÃœÄ°Y ve cihaz sayÄ±larÄ±"})]}),u.bankalar.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:h,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",u.bankalar.length,")"]})]})]})}),e.jsxs(P,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Te,{children:[e.jsx(Fe,{children:e.jsxs(le,{className:"bg-gray-50",children:[e.jsx(Z,{className:"border-r-2 border-gray-300",children:"Banka/PF AdÄ±"}),e.jsx(Z,{className:"text-center bg-blue-50 border-r",children:"Toplam ÃœÄ°Y"}),e.jsx(Z,{className:"text-center bg-blue-50",children:"Toplam Cihaz"})]})}),e.jsx(Le,{children:u.bankalar.length===0?e.jsx(le,{children:e.jsx(H,{colSpan:3,className:"text-center py-8 text-gray-500",children:"HenÃ¼z ÃœÄ°Y verisi bulunmuyor"})}):e.jsxs(e.Fragment,{children:[u.bankalar.slice(0,6).map((d,n)=>e.jsxs(le,{className:n%2===0?"bg-white hover:bg-gray-50":"bg-gray-50/50 hover:bg-gray-100",children:[e.jsx(H,{className:"border-r-2 border-gray-300",children:d.name}),e.jsx(H,{className:"text-center text-blue-700 border-r",children:d.toplamUiy}),e.jsx(H,{className:"text-center text-blue-700",children:d.toplamCihaz})]},n)),e.jsxs(le,{className:"bg-blue-100 border-t-2 border-blue-400 hover:bg-blue-100",children:[e.jsx(H,{className:"border-r-2 border-gray-300",children:e.jsx("strong",{children:"Genel Toplam"})}),e.jsx(H,{className:"text-center border-r",children:e.jsx("strong",{className:"text-blue-700",children:u.genelToplam.toplamUiy})}),e.jsx(H,{className:"text-center",children:e.jsx("strong",{className:"text-blue-700",children:u.genelToplam.toplamCihaz})})]})]})})]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"ðŸ“Š Not:"})," Bu tablo, en az 1 ÃœÄ°Y'si olan Banka/PF kayÄ±tlarÄ±nÄ± gÃ¶sterir. Toplam cihaz sayÄ±sÄ±na gÃ¶re sÄ±ralÄ±dÄ±r. DetaylÄ± rapor iÃ§in Raporlar modÃ¼lÃ¼ne bakÄ±nÄ±z."]})})]})]})]})}function st({payterProducts:x,customers:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=x.length,u=x.filter(t=>{var i;return((i=t.onlineStatus)==null?void 0:i.toLowerCase())==="online"}).length,h=x.filter(t=>{var i;return((i=t.onlineStatus)==null?void 0:i.toLowerCase())==="offline"||!t.onlineStatus}).length,d=x.filter(t=>t.domain?N.some(i=>{const c=i.domain||i.guncelMyPayterDomain;return c?ne(t.domain,c,i.ignoreMainDomain||!1,i.domainHierarchy):!1}):!1).length,n=j-d,r={aktif:u,pasif:h,synced:x.filter(t=>{var i,c;return((i=t.syncStatus)==null?void 0:i.toLowerCase().includes("sync"))||((c=t.syncStatus)==null?void 0:c.toLowerCase())==="synced"}).length},m=new Set(x.map(t=>ys(t.domain)).filter(Boolean)).size,a=N.map(t=>{var p,D;const c=(((D=(p=t.serviceFeeSettings)==null?void 0:p.deviceSubscriptions)==null?void 0:D.filter(T=>T.isActive))||[]).map(T=>T.deviceSerialNumber).filter(Boolean);if(c.length===0)return null;const g=t.domain||t.guncelMyPayterDomain,z=x.filter(T=>!c.includes(T.serialNumber)||!T.domain||!g?!1:ne(T.domain,g,t.ignoreMainDomain||!1,t.domainHierarchy)).length;return{name:t.cariAdi,domain:g,productCount:z}}).filter(t=>t!==null&&t.productCount>0).sort((t,i)=>i.productCount-t.productCount).slice(0,6),s=[{icon:e.jsx(Qe,{size:16,className:"text-green-600"}),label:"Online",count:r.aktif,color:"bg-green-50",textColor:"text-green-700"},{icon:e.jsx(De,{size:16,className:"text-gray-600"}),label:"Offline",count:r.pasif,color:"bg-gray-50",textColor:"text-gray-700"},...r.synced>0?[{icon:e.jsx(se,{size:16,className:"text-blue-600"}),label:"Senkronize",count:r.synced,color:"bg-blue-50",textColor:"text-blue-700"}]:[]],l=()=>{const t=x.slice(0,50).map(i=>{const c=N.find(g=>{var p,D;return(((D=(p=g.serviceFeeSettings)==null?void 0:p.deviceSubscriptions)==null?void 0:D.filter(T=>T.isActive).map(T=>T.deviceSerialNumber).filter(Boolean))||[]).includes(i.serialNumber||"")});return{label:i.serialNumber||"Seri No Yok",value:(c==null?void 0:c.cariAdi)||"MÃ¼ÅŸteri atanmamÄ±ÅŸ",badge:i.onlineStatus||"N/A"}});f({title:"TÃ¼m ÃœrÃ¼nler (Ä°lk 50)",items:t}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"text-orange-600",size:20}),"ÃœrÃ¼n Ã–zeti"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:j}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam ÃœrÃ¼n"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:u}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Online"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-600",children:h}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Offline"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Durum DaÄŸÄ±lÄ±mÄ±"}),x.length>0&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:l,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼m ÃœrÃ¼nler (",x.length,")"]})]})]}),e.jsx("div",{className:"space-y-2",children:s.map((t,i)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${t.color}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.icon,e.jsx("span",{className:"text-sm font-medium",children:t.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-bold ${t.textColor}`,children:t.count}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[j>0?Math.round(t.count/j*100):0,"%"]})]})]},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"MÃ¼ÅŸteri Entegrasyonu"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"MÃ¼ÅŸterili ÃœrÃ¼n"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:n}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"MÃ¼ÅŸterisiz ÃœrÃ¼n"})]})]}),e.jsxs("div",{className:"mt-3 text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Benzersiz Domain"})]})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"En Ã‡ok ÃœrÃ¼ne Sahip 6 MÃ¼ÅŸteri"}),e.jsx("div",{className:"space-y-2",children:a.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-orange-100 text-orange-700 rounded-full text-xs font-bold flex-shrink-0",children:i+1}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:t.name}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.domain})]})]}),e.jsxs(M,{variant:"secondary",className:"ml-2 whitespace-nowrap",children:[t.productCount," Ã¼rÃ¼n"]})]},i))})]})]})})]})]})}function tt({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),u=x.filter(t=>t.durum==="Aktif").filter(t=>t.subscriptionFee&&t.subscriptionFee>0),h=u.reduce((t,i)=>t+(i.subscriptionFee||0),0),d=u.length>0?h/u.length:0,n={low:u.filter(t=>(t.subscriptionFee||0)<1e3).length,medium:u.filter(t=>(t.subscriptionFee||0)>=1e3&&(t.subscriptionFee||0)<5e3).length,high:u.filter(t=>(t.subscriptionFee||0)>=5e3).length},r=x.filter(t=>{const i=t.domain||t.guncelMyPayterDomain;return i?N.filter(g=>ne(g.domain,i,t.ignoreMainDomain||!1)).some(g=>(g.askidaCihazSayisi||0)>0):!1}),m=r.reduce((t,i)=>{const c=i.domain||i.guncelMyPayterDomain;if(!c)return t;const g=N.filter(z=>ne(z.domain,c,i.ignoreMainDomain||!1));return t+g.reduce((z,p)=>z+(p.askidaCihazSayisi||0),0)},0),a=u.sort((t,i)=>(i.subscriptionFee||0)-(t.subscriptionFee||0)),s=a.slice(0,6),l=()=>{const t=a.map((i,c)=>({label:i.cariAdi||"Ä°simsiz MÃ¼ÅŸteri",value:`â‚º${(i.subscriptionFee||0).toLocaleString("tr-TR",{minimumFractionDigits:2})}`,icon:e.jsx(me,{size:14,className:"text-green-600"})}));f({title:"En YÃ¼ksek Gelirli MÃ¼ÅŸteriler - TÃ¼m Liste",items:t}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"text-green-600",size:20}),"Gelir Ã–zeti"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1 sm:col-span-2 text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["â‚º",h.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam AylÄ±k Gelir"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.length}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Ãœcretli MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-4 bg-indigo-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:["â‚º",d.toLocaleString("tr-TR",{minimumFractionDigits:0})]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Ort. Ãœcret/MÃ¼ÅŸteri"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Ãœcret DaÄŸÄ±lÄ±mÄ±"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50",children:[e.jsx(M,{variant:"outline",className:"bg-white",children:"< â‚º1,000"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-green-700",children:n.low}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[u.length>0?Math.round(n.low/u.length*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50",children:[e.jsx(M,{variant:"outline",className:"bg-white",children:"â‚º1,000 - â‚º5,000"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-blue-700",children:n.medium}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[u.length>0?Math.round(n.medium/u.length*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-purple-50",children:[e.jsx(M,{variant:"outline",className:"bg-white",children:"â‰¥ â‚º5,000"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-purple-700",children:n.high}),e.jsxs(M,{variant:"outline",className:"min-w-[50px] justify-center",children:[u.length>0?Math.round(n.high/u.length*100):0,"%"]})]})]})]})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:16,className:"text-amber-600"}),"Risk Analizi"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:r.length}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"AskÄ±dalÄ± MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:m}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"AskÄ±da Cihaz"})]})]})]}),s.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"En YÃ¼ksek Gelirli 6 MÃ¼ÅŸteri"}),a.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:l,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",a.length,")"]})]})]}),e.jsx("div",{className:"space-y-2",children:s.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-green-100 text-green-700 rounded-full text-xs font-bold flex-shrink-0",children:i+1}),e.jsx("span",{className:"text-sm font-medium truncate",children:t.cariAdi||"Ä°simsiz MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(me,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-green-700 whitespace-nowrap",children:["â‚º",(t.subscriptionFee||0).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]},t.id))})]}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:20,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"YÄ±llÄ±k Projeksiyon"})]}),e.jsxs("div",{className:"text-xl font-bold text-green-700",children:["â‚º",(h*12).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})})]})})]})]})}function at({customers:x}){const[N,v]=b.useState(!0),k=b.useMemo(()=>{var r;const f=new Date,j=f.getFullYear(),u=f.getMonth(),h=new Map;x.forEach(m=>{if(m.kayitTarihi){const a=new Date(m.kayitTarihi),s=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;h.has(s)||h.set(s,[]),h.get(s).push(m)}});const d=[];let n=0;for(let m=11;m>=0;m--){const a=new Date(j,u-m,1),s=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,l=h.get(s)||[],t=l.filter(p=>p.durum==="Aktif").length,i=l.filter(p=>p.durum==="Pasif").length;n+=t-i;const c=m===11?0:((r=d[d.length-1])==null?void 0:r.total)||0,g=n-c,z=c>0?g/c*100:0;d.push({month:a.toLocaleDateString("tr-TR",{month:"short",year:"2-digit"}),total:n,change:g,changePercent:z,newCustomers:t,lostCustomers:i})}return d},[x]).slice(-6),S=k.length>0?k[k.length-1].total-k[0].total:0,w=k.length>0?k.reduce((f,j)=>f+j.change,0)/k.length:0;return e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-green-600",size:20}),"MÃ¼ÅŸteri BÃ¼yÃ¼mesi"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>v(!N),className:"h-8 w-8 p-0",title:N?"Daralt":"GeniÅŸlet",children:N?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),N&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[S>=0?"+":"",S]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Son 6 Ay BÃ¼yÃ¼me"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[w>=0?"+":"",w.toFixed(1)]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Ortalama AylÄ±k"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.length}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam MÃ¼ÅŸteri"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"AylÄ±k Detay (Son 6 Ay)"}),e.jsx("div",{className:"space-y-2",children:k.map((f,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm min-w-[60px]",children:f.month}),e.jsxs("div",{className:"flex items-center gap-2",children:[f.change>0?e.jsx(se,{size:14,className:"text-green-600"}):f.change<0?e.jsx(Re,{size:14,className:"text-red-600"}):e.jsx(Rs,{size:14,className:"text-gray-400"}),e.jsxs("span",{className:`text-xs font-semibold ${f.change>0?"text-green-600":f.change<0?"text-red-600":"text-gray-600"}`,children:[f.change>=0?"+":"",f.change]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",className:"text-xs",children:[f.total," toplam"]}),f.newCustomers>0&&e.jsxs(M,{variant:"secondary",className:"text-xs bg-green-50 text-green-700",children:["+",f.newCustomers]}),f.lostCustomers>0&&e.jsxs(M,{variant:"secondary",className:"text-xs bg-red-50 text-red-700",children:["-",f.lostCustomers]})]})]},j))})]})]})})]})}function it({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=b.useMemo(()=>{const d=new Map;x.forEach(t=>{const i=t.sektor||"BelirtilmemiÅŸ";d.has(i)||d.set(i,[]),d.get(i).push(t)});const n=Array.from(d.entries()).map(([t,i])=>{const c=i.length,g=c/x.length*100;let z=0;i.forEach(q=>{var J;const he=(((J=q.serviceFeeSettings)==null?void 0:J.deviceSubscriptions)||[]).filter(X=>X.isActive).map(X=>X.deviceSerialNumber).filter(Boolean),te=q.domain||q.guncelMyPayterDomain,R=N.filter(X=>!he.includes(X.serialNumber)||!X.domain||!te?!1:ne(X.domain,te,q.ignoreMainDomain||!1)).length;z+=R});const p=c>0?z/c:0,D=z*10,F=i.filter(q=>q.durum==="Aktif").length/c*100,L=F>90?"up":F<75?"down":"stable",Q=F>90?"low":F>80?"medium":"high";return{sector:t,customerCount:c,percentage:g,totalDevices:z,avgDevices:p,totalRevenue:D,activeRate:F,growthTrend:L,riskLevel:Q}});n.sort((t,i)=>i.customerCount-t.customerCount);let r=0;n.forEach(({percentage:t})=>{const i=t/100;i>0&&(r-=i*Math.log(i))});let m=0;n.forEach(({percentage:t})=>{m+=Math.pow(t,2)});const a=n.slice(0,3).reduce((t,i)=>t+i.percentage,0),s=m<1500?"Ä°yi DaÄŸÄ±lmÄ±ÅŸ":m<2500?"Orta":"YoÄŸun",l=m<1500?"DÃ¼ÅŸÃ¼k":m<2500?"Orta":"YÃ¼ksek";return{sectorCount:d.size,topSector:n[0],leastSector:n[n.length-1],shannonIndex:r.toFixed(2),hhi:Math.round(m),diversityStatus:s,concentrationRisk:l,top3Share:a.toFixed(1),topSectors:n.slice(0,6),allSectors:n}},[x,N]),u=d=>{const n={low:"bg-green-100 text-green-700 border-green-200",medium:"bg-yellow-100 text-yellow-700 border-yellow-200",high:"bg-red-100 text-red-700 border-red-200"},r={low:"DÃ¼ÅŸÃ¼k",medium:"Orta",high:"YÃ¼ksek"};return e.jsx(M,{variant:"outline",className:`text-xs ${n[d]}`,children:r[d]})},h=()=>{const d=j.allSectors.map(n=>({label:n.sector,value:`${n.customerCount} mÃ¼ÅŸteri â€¢ ${n.totalDevices} cihaz`,badge:`â‚¬${n.totalRevenue.toLocaleString()}`}));f({title:"SektÃ¶r Ã‡eÅŸitliliÄŸi - TÃ¼m Liste",items:d}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"text-purple-600",size:20}),"SektÃ¶r Ã‡eÅŸitliliÄŸi Analizi"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Top 6 SektÃ¶r DaÄŸÄ±lÄ±mÄ±"}),j.allSectors.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:h,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",j.allSectors.length,")"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Te,{children:[e.jsx(Fe,{children:e.jsxs(le,{children:[e.jsx(Z,{className:"text-xs",children:"SektÃ¶r"}),e.jsx(Z,{className:"text-xs text-right",children:"MÃ¼ÅŸteri"}),e.jsx(Z,{className:"text-xs text-right",children:"Oran"}),e.jsx(Z,{className:"text-xs text-center",children:"Risk"})]})}),e.jsx(Le,{children:j.topSectors.map((d,n)=>e.jsxs(le,{children:[e.jsx(H,{className:"text-xs font-medium max-w-[120px] truncate",title:d.sector,children:d.sector}),e.jsx(H,{className:"text-xs text-right font-semibold",children:d.customerCount}),e.jsx(H,{className:"text-xs text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("div",{className:"w-12 h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Math.min(d.percentage,100)}%`}})}),e.jsxs("span",{className:"font-semibold",children:[d.percentage.toFixed(1),"%"]})]})}),e.jsx(H,{className:"text-center",children:u(d.riskLevel)})]},n))})]})})]})})})]})]})}const lt={5411:{category:"Perakende",description:"SÃ¼permarketler"},8211:{category:"EÄŸitim",description:"Ä°lkÃ¶ÄŸretim ve OrtaÃ¶ÄŸretim OkullarÄ±"},8011:{category:"SaÄŸlÄ±k",description:"Doktorlar ve Hekimler"},6011:{category:"Finans",description:"Finansal Kurumlar (Manuel)"},5812:{category:"Restoran",description:"Yeme-Ä°Ã§me Yerleri"},5999:{category:"Perakende",description:"Ã‡eÅŸitli Perakende MaÄŸazalarÄ±"},7011:{category:"Konaklama",description:"Oteller ve Moteller"},5912:{category:"SaÄŸlÄ±k",description:"Eczaneler"},5941:{category:"Spor",description:"Spor Malzemeleri MaÄŸazalarÄ±"},7372:{category:"Teknoloji",description:"YazÄ±lÄ±m Hizmetleri"}};function nt({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=b.useMemo(()=>{const h=new Map,d=x.filter(l=>l.mcc);d.forEach(l=>{const t=l.mcc||"BelirtilmemiÅŸ";h.has(t)||h.set(t,[]),h.get(t).push(l)});const n=Array.from(h.entries()).map(([l,t])=>{const i=lt[l]||{category:"DiÄŸer",description:"TanÄ±msÄ±z Kategori"},c=t.length,g=c/d.length*100;let z=0;t.forEach(Y=>{var R;const te=(((R=Y.serviceFeeSettings)==null?void 0:R.deviceSubscriptions)||[]).filter(J=>J.isActive).map(J=>J.deviceSerialNumber).filter(Boolean);if(te.length>0){const J=Y.domain||Y.guncelMyPayterDomain,X=N.filter(ue=>!te.includes(ue.serialNumber)||!ue.domain||!J?!1:ne(ue.domain,J,Y.ignoreMainDomain||!1)).length;z+=X}});const p=c>0?z/c:0,D=z*10,F=t.filter(Y=>Y.durum==="Aktif").length/c*100,L=F>90?8:F>85?3:F>80?0:-2,Q=F>90?"low":F>80?"medium":"high",q=F>90&&L>5?4:F>85&&L>0?3:F>80?2:1;return{mcc:l,category:i.category,description:i.description,customerCount:c,percentage:g,totalDevices:z,monthlyRevenue:D,avgDevicesPerCustomer:p,activeRate:F,growth:L,riskLevel:Q,opportunity:q}});n.sort((l,t)=>t.customerCount-l.customerCount);let r=0;n.forEach(({percentage:l})=>{const t=l/100;t>0&&(r-=t*Math.log(t))});let m=0;n.forEach(({percentage:l})=>{const t=l/100;m+=t*t}),m=1-m;const a=new Map;n.forEach(l=>{const t=a.get(l.category)||{count:0,customers:0,revenue:0};a.set(l.category,{count:t.count+1,customers:t.customers+l.customerCount,revenue:t.revenue+l.monthlyRevenue})});const s=n.slice(0,5).reduce((l,t)=>l+t.percentage,0);return{totalMCCCount:h.size,topMCC:n[0],leastMCC:n[n.length-1],shannonIndex:r.toFixed(2),simpsonIndex:m.toFixed(2),top5Concentration:s.toFixed(1),missingMCC:x.length-d.length,topMCCs:n.slice(0,6),categoryGroups:Array.from(a.entries()).map(([l,t])=>({category:l,...t,percentage:t.customers/d.length*100})).sort((l,t)=>t.customers-l.customers),allMCCs:n}},[x,N]),u=()=>{const h=j.allMCCs.map(d=>({label:`${d.mcc} - ${d.description}`,value:`${d.customerCount} mÃ¼ÅŸteri â€¢ ${d.totalDevices} cihaz`,badge:`â‚¬${d.monthlyRevenue.toLocaleString()}`}));f({title:"MCC Ã‡eÅŸitliliÄŸi - TÃ¼m Liste",items:h}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"text-emerald-600",size:20}),"MCC Ã‡eÅŸitliliÄŸi Analizi"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Kategori GruplamasÄ±"}),e.jsx("div",{className:"space-y-2",children:j.categoryGroups.slice(0,5).map((h,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h.category}),e.jsxs("div",{className:"text-xs text-gray-500",children:[h.count," farklÄ± MCC â€¢ ",h.customers," mÃ¼ÅŸteri"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-emerald-600",children:[h.percentage.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["â‚¬",h.revenue.toLocaleString("tr-TR")]})]})]},d))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Top 6 MCC DaÄŸÄ±lÄ±mÄ±"}),j.allMCCs.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:u,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",j.allMCCs.length,")"]})]})]}),e.jsx("div",{className:"space-y-2",children:j.topMCCs.slice(0,6).map((h,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("span",{className:"font-mono font-semibold text-sm",children:h.mcc}),e.jsx(M,{variant:"outline",className:"text-xs",children:h.category})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm",children:h.customerCount}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-12 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.min(h.percentage,100)}%`}})}),e.jsxs("span",{className:"font-semibold text-sm min-w-[45px] text-right",children:[h.percentage.toFixed(1),"%"]})]})]})]},d))})]})]})})]})]})}function rt({customers:x,bankPFRecords:N,banks:v}){const[C,k]=b.useState(!0),[S,w]=b.useState(!1),[f,j]=b.useState({title:"",items:[]}),u=v.map(a=>{const s=x.filter(c=>{var g;return(g=c.linkedBankPFIds)==null?void 0:g.some(z=>{const p=N.find(D=>D.id===z);return(p==null?void 0:p.bankaAdi)===a.bankaAdi})}),l=s.reduce((c,g)=>{var D;const p=(((D=g.serviceFeeSettings)==null?void 0:D.deviceSubscriptions)||[]).filter(T=>T.isActive);return c+p.length},0),t=s.filter(c=>c.durum==="Aktif").length,i=l*10;return{bankId:a.id,bankName:a.bankaAdi,bankCode:a.bankaKodu,customerCount:s.length,deviceCount:l,totalRevenue:i,activeCustomers:t}}).filter(a=>a.customerCount>0).sort((a,s)=>s.totalRevenue-a.totalRevenue).slice(0,6),h=u.length,d=u.reduce((a,s)=>a+s.customerCount,0),n=u.reduce((a,s)=>a+s.deviceCount,0),r=u.reduce((a,s)=>a+s.totalRevenue,0),m=()=>{const a=u.map(s=>({label:`${s.bankName} (${s.bankCode})`,value:`${s.deviceCount} cihaz â€¢ ${s.customerCount} mÃ¼ÅŸteri`,badge:`â‚¬${s.totalRevenue.toLocaleString()}`}));j({title:"Banka PerformansÄ± - TÃ¼m Liste",items:a}),w(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:S,onClose:()=>w(!1),title:f.title,items:f.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"text-blue-600",size:20}),"Banka PerformansÄ±"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>k(!C),className:"h-8 w-8 p-0",title:C?"Daralt":"GeniÅŸlet",children:C?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),C&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif Banka"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam Cihaz"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-amber-600",children:["â‚¬",r.toLocaleString("tr-TR")]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"AylÄ±k Gelir"})]})]}),u.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Performansa GÃ¶re Bankalar (Top 6)"}),u.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:m,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",u.length,")"]})]})]}),e.jsx("div",{className:"space-y-2",children:u.map((a,s)=>e.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-700 rounded-full text-xs font-bold",children:s+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:a.bankName}),e.jsx("div",{className:"text-xs text-gray-600",children:a.bankCode})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"default",className:"bg-green-600",children:["â‚¬",a.totalRevenue.toLocaleString("tr-TR")]}),s<3&&e.jsx(se,{size:16,className:"text-green-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:a.customerCount}),e.jsx("div",{className:"text-gray-600",children:"MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:a.deviceCount}),e.jsx("div",{className:"text-gray-600",children:"Cihaz"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded",children:[e.jsx("div",{className:"font-semibold text-green-600",children:a.activeCustomers}),e.jsx("div",{className:"text-gray-600",children:"Aktif"})]})]})]},a.bankId))})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(je,{size:48,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"HenÃ¼z banka verisi yok"})]})]})})]})]})}function ct({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),S=(()=>{const n=[],r=new Date;for(let m=11;m>=0;m--){const a=new Date(r.getFullYear(),r.getMonth()-m,1);a.toISOString().slice(0,7);const s=a.toLocaleDateString("tr-TR",{month:"short",year:"numeric"}),l=x.filter(g=>g.kayitTarihi?new Date(g.kayitTarihi)<=a:!0).length,i=x.reduce((g,z)=>{var F;const D=(((F=z.serviceFeeSettings)==null?void 0:F.deviceSubscriptions)||[]).filter(L=>L.isActive);return!z.kayitTarihi||new Date(z.kayitTarihi)<=a?g+D.length:g},0)*10,c=i;n.push({month:s,deviceRevenue:i,totalRevenue:c,customerCount:l})}return n})(),w=S[S.length-1],f=S[S.length-2],j=w&&f?(w.totalRevenue-f.totalRevenue)/(f.totalRevenue||1)*100:0,u=j>=0,h=(w==null?void 0:w.totalRevenue)||0,d=(w==null?void 0:w.customerCount)||0;return e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"text-green-600",size:20}),"Gelir Trend Analizi"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["â‚¬",h.toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Bu Ay Gelir"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:d}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg ${u?"bg-emerald-50":"bg-red-50"}`,children:[e.jsxs("div",{className:`text-3xl font-bold flex items-center justify-center gap-1 ${u?"text-emerald-600":"text-red-600"}`,children:[u?e.jsx(se,{size:24}):e.jsx(Re,{size:24}),Math.abs(j).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"AylÄ±k DeÄŸiÅŸim"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Son 12 Ay Gelir Trendi"}),S.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(me,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"HenÃ¼z gelir verisi yok"})]}):e.jsx("div",{className:"h-64",children:e.jsx(zs,{width:"100%",height:"100%",children:e.jsxs(ws,{data:S,children:[e.jsx(Ss,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Ds,{dataKey:"month",tick:{fontSize:12},stroke:"#888"}),e.jsx(Ms,{tick:{fontSize:12},stroke:"#888",tickFormatter:n=>`â‚¬${n}`}),e.jsx(Ts,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"},formatter:n=>[`â‚¬${n.toLocaleString()}`,"Gelir"]}),e.jsx(Fs,{wrapperStyle:{fontSize:"12px"}}),e.jsx(Ye,{type:"monotone",dataKey:"totalRevenue",name:"Toplam Gelir",stroke:"#10b981",strokeWidth:3,dot:{r:4,fill:"#10b981"},activeDot:{r:6}}),e.jsx(Ye,{type:"monotone",dataKey:"deviceRevenue",name:"Cihaz Geliri",stroke:"#3b82f6",strokeWidth:2,dot:{r:3,fill:"#3b82f6"},strokeDasharray:"5 5"})]})})})]})]})})]})}function dt({customers:x,payterProducts:N}){var s;const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=new Map;x.forEach(l=>{var L;const t=l.salesRepId||"unassigned",i=l.salesRepName||"AtanmamÄ±ÅŸ",c=i.trim().toLowerCase().replace(/\s+/g,"-"),g=t==="unassigned"?"unassigned":c,z=i.trim();j.has(g)||j.set(g,{repId:g,repName:z,customerCount:0,activeCustomers:0,totalDevices:0,totalRevenue:0,averageDevicesPerCustomer:0});const p=j.get(g);p.customerCount++,l.durum==="Aktif"&&p.activeCustomers++;const F=(((L=l.serviceFeeSettings)==null?void 0:L.deviceSubscriptions)||[]).filter(Q=>Q.isActive).length;p.totalDevices+=F,p.totalRevenue+=F*10}),j.forEach(l=>{l.averageDevicesPerCustomer=l.customerCount>0?Math.round(l.totalDevices/l.customerCount*10)/10:0});const u=Array.from(j.values()).sort((l,t)=>t.totalRevenue-l.totalRevenue),h=x.length,d=u.filter(l=>l.repId!=="unassigned"&&l.customerCount>0).length,n=((s=u.find(l=>l.repId==="unassigned"))==null?void 0:s.customerCount)||0,r=u.filter(l=>l.repId!=="unassigned").slice(0,6),m=u.filter(l=>l.repId!=="unassigned"),a=()=>{const l=m.map(t=>({label:t.repName,value:`${t.totalDevices} cihaz â€¢ ${t.customerCount} mÃ¼ÅŸteri`,badge:`â‚¬${t.totalRevenue.toLocaleString()}`}));f({title:"SatÄ±ÅŸ Temsilcisi PerformansÄ± - TÃ¼m Liste",items:l}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"text-orange-600",size:20}),"SatÄ±ÅŸ Temsilcisi PerformansÄ±"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:d}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Aktif Temsilci"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:h}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Toplam MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:n}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"AtanmamÄ±ÅŸ"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Top 6 Temsilci"}),m.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:a,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",m.length,")"]})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"HenÃ¼z temsilci verisi yok"})]}):e.jsx("div",{className:"space-y-2",children:r.map((l,t)=>e.jsxs("div",{className:"p-3 bg-white border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(M,{variant:t===0?"default":"outline",className:"h-8 w-8 flex items-center justify-center p-0",children:t===0?e.jsx(Gs,{size:14}):e.jsx("span",{className:"text-xs",children:t+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:l.repName}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.activeCustomers," aktif"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"MÃ¼ÅŸteri: "}),e.jsx("span",{className:"font-semibold",children:l.customerCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cihaz: "}),e.jsx("span",{className:"font-semibold",children:l.totalDevices})]})]}),e.jsxs("div",{className:"font-semibold text-green-600 text-sm",children:["â‚¬",l.totalRevenue.toLocaleString()]})]})]},l.repId))})]}),n>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(xe,{size:24,className:"text-amber-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sm text-amber-900",children:[n," mÃ¼ÅŸteri temsilciye atanmamÄ±ÅŸ"]}),e.jsx("div",{className:"text-xs text-amber-700",children:"Bu mÃ¼ÅŸterileri bir satÄ±ÅŸ temsilcisine atamanÄ±z Ã¶nerilir"})]})]})]})})]})]})}function ot({customers:x}){const[N,v]=b.useState(!0),[C,k]=b.useState(!1),[S,w]=b.useState({title:"",items:[]}),f=[];x.forEach(a=>{var z,p,D;const s=((z=a.serviceFeeSettings)==null?void 0:z.deviceSubscriptions)||[],t=s.filter(T=>T.isActive).length,i=t*10,c=((D=(p=a.serviceFeeSettings)==null?void 0:p.invoices)==null?void 0:D.filter(T=>T.status==="overdue"))||[];c.length>0&&f.push({id:a.id,name:a.cariAdi,riskType:"overdue",riskLevel:c.length>=3?"high":c.length>=2?"medium":"low",details:`${c.length} gecikmiÅŸ fatura`,deviceCount:t,potentialLoss:i});const g=s.filter(T=>T.paymentStatus==="suspended");g.length>0&&f.push({id:a.id,name:a.cariAdi,riskType:"suspended",riskLevel:g.length===t?"high":"medium",details:`${g.length} cihaz askÄ±ya alÄ±ndÄ±`,deviceCount:t,potentialLoss:i}),a.durum==="Pasif"&&t>0&&f.push({id:a.id,name:a.cariAdi,riskType:"inactive",riskLevel:t>=10?"high":t>=5?"medium":"low",details:`Pasif mÃ¼ÅŸteri (${t} cihaz)`,deviceCount:t,potentialLoss:i}),a.durum==="Aktif"&&t===0&&f.push({id:a.id,name:a.cariAdi,riskType:"no-device",riskLevel:"low",details:"Cihaz tanÄ±mlÄ± deÄŸil",deviceCount:0,potentialLoss:0})});const j=f.sort((a,s)=>{const l={high:0,medium:1,low:2};return l[a.riskLevel]-l[s.riskLevel]}),u={high:j.filter(a=>a.riskLevel==="high").length,medium:j.filter(a=>a.riskLevel==="medium").length,low:j.filter(a=>a.riskLevel==="low").length,overdue:j.filter(a=>a.riskType==="overdue").length,suspended:j.filter(a=>a.riskType==="suspended").length},h=j.reduce((a,s)=>a+s.potentialLoss,0),d=j.slice(0,6),n=a=>{switch(a){case"high":return"bg-red-100 text-red-800 border-red-300";case"medium":return"bg-amber-100 text-amber-800 border-amber-300";case"low":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},r=a=>{switch(a){case"overdue":return e.jsx(Me,{size:16,className:"text-red-600"});case"suspended":return e.jsx(De,{size:16,className:"text-amber-600"});case"inactive":return e.jsx(ge,{size:16,className:"text-yellow-600"});case"no-device":return e.jsx(me,{size:16,className:"text-gray-600"});default:return e.jsx(ge,{size:16})}},m=()=>{const a=j.map(s=>({label:s.name,value:`${s.deviceCount} cihaz â€¢ â‚¬${s.potentialLoss.toLocaleString()}`,badge:s.riskLevel.toUpperCase(),icon:r(s.riskType),className:n(s.riskLevel)}));w({title:"Riskli MÃ¼ÅŸteriler - TÃ¼m Liste",items:a}),k(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:C,onClose:()=>k(!1),title:S.title,items:S.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"text-red-600",size:20}),"Risk Dashboard'u"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>v(!N),className:"h-8 w-8 p-0",title:N?"Daralt":"GeniÅŸlet",children:N?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),N&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:u.high}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"YÃ¼ksek Risk"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:u.medium}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Orta Risk"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["â‚¬",h.toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Potansiyel KayÄ±p"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(Me,{size:20,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-red-900",children:u.overdue}),e.jsx("div",{className:"text-xs text-red-700",children:"GecikmiÅŸ Ã–deme"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx(De,{size:20,className:"text-amber-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-amber-900",children:u.suspended}),e.jsx("div",{className:"text-xs text-amber-700",children:"AskÄ±ya AlÄ±ndÄ±"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"YÃ¼ksek Riskli MÃ¼ÅŸteriler (Top 6)"}),j.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:m,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",j.length,")"]})]})]}),d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ge,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Harika! Risk tespit edilmedi"})]}):e.jsx("div",{className:"space-y-2",children:d.map(a=>e.jsxs("div",{className:"p-3 bg-white border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r(a.riskType),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs(M,{className:`${n(a.riskLevel)} text-xs whitespace-nowrap ml-2`,children:[a.riskLevel==="high"&&"YÃ¼ksek",a.riskLevel==="medium"&&"Orta",a.riskLevel==="low"&&"DÃ¼ÅŸÃ¼k"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t text-xs",children:[e.jsx("span",{className:"text-gray-600",children:a.details}),e.jsx("span",{className:"font-semibold text-red-600 ml-2",children:a.potentialLoss>0?`â‚¬${a.potentialLoss}`:"-"})]})]},`${a.id}-${a.riskType}`))})]})]})})]})]})}function xt({customers:x,payterProducts:N}){const[v,C]=b.useState(!0),[k,S]=b.useState(!1),[w,f]=b.useState({title:"",items:[]}),j=x.map(s=>{var F;const t=(((F=s.serviceFeeSettings)==null?void 0:F.deviceSubscriptions)||[]).filter(L=>L.isActive),i=t.length,c=i*10,g=t.map(L=>L.deviceSerialNumber).filter(Boolean),z=s.domain||s.guncelMyPayterDomain,D=N.filter(L=>!g.includes(L.serialNumber)||!L.domain||!z?!1:ne(L.domain,z,s.ignoreMainDomain||!1)).length;let T="Micro";return i>=100?T="Enterprise":i>=51?T="Large":i>=21?T="Medium":i>=6&&(T="Small"),{id:s.id,name:s.cariAdi,deviceCount:i,revenue:c,productCount:D,status:s.durum,category:T}});j.filter(s=>s.productCount>0).length,j.filter(s=>s.productCount===0).length,j.reduce((s,l)=>s+l.productCount,0);const u={Enterprise:1,Large:2,Medium:3,Small:4,Micro:5},h=[...j].sort((s,l)=>{const t=(u[s.category]||999)-(u[l.category]||999);return t!==0?t:l.deviceCount-s.deviceCount});[...j].sort((s,l)=>l.revenue-s.revenue).slice(0,6);const d=j.reduce((s,l)=>s+l.deviceCount,0),n=j.reduce((s,l)=>s+l.revenue,0),r=j.filter(s=>s.category==="Enterprise").length,m=s=>{switch(s){case"Enterprise":return"bg-purple-100 text-purple-800 border-purple-300";case"Large":return"bg-blue-100 text-blue-800 border-blue-300";case"Medium":return"bg-green-100 text-green-800 border-green-300";case"Small":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Micro":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},a=()=>{const s=h.map((l,t)=>({label:l.name,value:`${l.deviceCount} cihaz â€¢ â‚¬${l.revenue.toLocaleString()}`,badge:l.category,className:m(l.category)}));f({title:"En Ã‡ok Cihaza Sahip MÃ¼ÅŸteriler - TÃ¼m Liste",items:s}),S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{isOpen:k,onClose:()=>S(!1),title:w.title,items:w.items}),e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"text-amber-600",size:20}),"Top 6 MÃ¼ÅŸteriler"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>C(!v),className:"h-8 w-8 p-0",title:v?"Daralt":"GeniÅŸlet",children:v?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),v&&e.jsx(P,{className:"px-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-6 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl font-bold text-amber-600",children:r}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Enterprise MÃ¼ÅŸteri"})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600",children:d}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Toplam Cihaz"})]}),e.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-600",children:["â‚¬",n.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Toplam Gelir"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"En Ã‡ok Cihaza Sahip 6 MÃ¼ÅŸteri"}),h.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:a,className:"h-8 gap-1",children:[e.jsx(K,{size:14}),e.jsxs("span",{className:"text-xs",children:["TÃ¼mÃ¼nÃ¼ GÃ¶ster (",h.length,")"]})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xe,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"HenÃ¼z mÃ¼ÅŸteri verisi yok"})]}):e.jsx("div",{className:"space-y-2",children:h.slice(0,6).map((s,l)=>e.jsx("div",{className:"p-3 bg-white border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(M,{variant:l<3?"default":"outline",className:"h-8 w-8 flex items-center justify-center p-0 flex-shrink-0",children:l===0?e.jsx(Ve,{size:14,className:"text-amber-500"}):e.jsx("span",{className:"text-xs",children:l+1})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"font-medium text-sm truncate",children:s.name})}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Cihaz: "}),e.jsx("span",{className:"font-semibold",children:s.deviceCount})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Gelir: "}),e.jsxs("span",{className:"font-semibold text-green-600",children:["â‚¬",s.revenue.toLocaleString()]})]})]})]}),e.jsx(M,{className:`${m(s.category)} text-xs whitespace-nowrap flex-shrink-0`,children:s.category})]})},s.id))})]})]})})]})]})}function mt({customers:x,bankPFRecords:N,payterProducts:v}){const[C,k]=b.useState(!0),[S,w]=b.useState(new Date);b.useEffect(()=>{w(new Date)},[x,N,v]);const f={customers:x.length,activeCustomers:x.filter(h=>h.durum==="Aktif").length,bankPF:N.length,products:v.length,totalDevices:x.reduce((h,d)=>{var m;const r=(((m=d.serviceFeeSettings)==null?void 0:m.deviceSubscriptions)||[]).filter(a=>a.isActive);return h+r.length},0)},u=(()=>{var d;let h=0;for(const n in localStorage)localStorage.hasOwnProperty(n)&&(h+=((d=localStorage.getItem(n))==null?void 0:d.length)||0);return(h/1024/1024).toFixed(2)})();return e.jsxs(A,{className:"h-full w-full",children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"text-green-600",size:20}),"Sistem Durumu"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>k(!C),className:"h-8 w-8 p-0",title:C?"Daralt":"GeniÅŸlet",children:C?e.jsx(O,{size:16,className:"text-gray-600"}):e.jsx(G,{size:16,className:"text-gray-600"})})]})}),C&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{size:24,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-green-900",children:"TÃ¼m Veriler Senkronize"}),e.jsx("div",{className:"text-xs text-green-700",children:"Dashboard gÃ¼ncel"})]})]}),e.jsx(M,{className:"bg-green-600",children:"Aktif"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Me,{size:16}),e.jsxs("span",{children:["Son gÃ¼ncelleme:"," ",S.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.customers}),e.jsx("div",{className:"text-xs text-gray-600",children:"MÃ¼ÅŸteri"}),e.jsxs("div",{className:"text-xs text-blue-600",children:[f.activeCustomers," aktif"]})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.bankPF}),e.jsx("div",{className:"text-xs text-gray-600",children:"Banka/PF"})]}),e.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:f.products}),e.jsx("div",{className:"text-xs text-gray-600",children:"ÃœrÃ¼n"})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:f.totalDevices}),e.jsx("div",{className:"text-xs text-gray-600",children:"Cihaz"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"LocalStorage KullanÄ±mÄ±"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[u," MB"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(parseFloat(u)/10*100,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx(_e,{size:16,className:"text-indigo-600"}),e.jsxs("div",{className:"text-xs text-indigo-900",children:[e.jsx("div",{className:"font-semibold",children:"Otomatik Yenileme Aktif"}),e.jsx("div",{className:"text-indigo-700",children:"Her 30 saniyede bir gÃ¼ncellenir"})]})]})]})})]})}function ht({customers:x,isPinned:N=!1,onTogglePin:v}){const[C,k]=b.useState(!0),[S,w]=b.useState(!1),[f,j]=b.useState({title:"",items:[]}),u=x.filter(i=>i.durum==="Aktif"),h=u.filter(i=>i.subscriptionFee&&i.subscriptionFee>0);console.log("ðŸ“Š Abonelik Geliri Widget Debug:",{totalCustomers:x.length,activeCustomers:u.length,customersWithFee:h.length,sampleFees:h.slice(0,3).map(i=>({name:i.cariAdi,fee:i.subscriptionFee}))});const d=h.length,n=h.reduce((i,c)=>i+(c.subscriptionFee||0),0),r=d,m=n*12,a=d>0?n/d:0,s=h.sort((i,c)=>(c.subscriptionFee||0)-(i.subscriptionFee||0)),l=s.slice(0,6),t=()=>{const i=s.map(c=>({label:c.cariAdi||"Ä°simsiz MÃ¼ÅŸteri",value:`â‚º${(c.subscriptionFee||0).toLocaleString("tr-TR",{minimumFractionDigits:2})} / ay`,badge:`YÄ±llÄ±k: â‚º${((c.subscriptionFee||0)*12).toLocaleString("tr-TR",{minimumFractionDigits:2})}`,icon:e.jsx(me,{size:14,className:"text-green-600"})}));j({title:"TÃ¼m Abone MÃ¼ÅŸteriler",items:i}),w(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"relative",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(W,{className:"text-sm",children:"Abone Hizmet Bedeli Ã–zeti"}),e.jsx("div",{className:"flex gap-1",children:e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>k(!C),className:"h-8 w-8 p-0",children:C?e.jsx(O,{size:14}):e.jsx(G,{size:14})})})]}),C&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ys,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-900",children:"AylÄ±k Toplam"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Abone SayÄ±sÄ±"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl text-blue-900",children:d}),e.jsx("span",{className:"text-xs text-blue-600",children:"mÃ¼ÅŸteri"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Toplam Tutar"}),e.jsx("div",{className:"flex items-baseline gap-1",children:e.jsxs("span",{className:"text-2xl text-blue-900",children:["â‚º",n.toLocaleString("tr-TR",{maximumFractionDigits:0})]})}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ort: â‚º",a.toLocaleString("tr-TR",{maximumFractionDigits:0})," / mÃ¼ÅŸteri"]})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs text-green-900",children:"YÄ±llÄ±k Projeksiyon"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700 mb-1",children:"Abone SayÄ±sÄ±"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl text-green-900",children:r}),e.jsx("span",{className:"text-xs text-green-600",children:"mÃ¼ÅŸteri"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700 mb-1",children:"Toplam Tutar"}),e.jsx("div",{className:"flex items-baseline gap-1",children:e.jsxs("span",{className:"text-2xl text-green-900",children:["â‚º",m.toLocaleString("tr-TR",{maximumFractionDigits:0})]})}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Ort: â‚º",(a*12).toLocaleString("tr-TR",{maximumFractionDigits:0})," / mÃ¼ÅŸteri"]})]})]})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"text-xs text-gray-700",children:"En YÃ¼ksek Abonelikler (Top 6)"})]}),s.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:t,className:"h-7 text-xs",children:[e.jsx(K,{size:12,className:"mr-1"}),"TÃ¼mÃ¼ (",s.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:l.map((i,c)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs(M,{variant:"outline",className:"text-xs shrink-0",children:["#",c+1]}),e.jsx("span",{className:"text-xs truncate",children:i.cariAdi||"Ä°simsiz"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[e.jsxs(M,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:["â‚º",(i.subscriptionFee||0).toLocaleString("tr-TR",{maximumFractionDigits:0})," / ay"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["YÄ±llÄ±k: â‚º",((i.subscriptionFee||0)*12).toLocaleString("tr-TR",{maximumFractionDigits:0})]})]})]},i.id))})]}),h.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"HenÃ¼z abone hizmet bedeli tanÄ±mlÄ± mÃ¼ÅŸteri bulunmuyor"})]})})]}),e.jsx(U,{isOpen:S,onClose:()=>w(!1),title:f.title,items:f.items})]})}function ut({customers:x,payterProducts:N,isPinned:v=!1,onTogglePin:C}){const[k,S]=b.useState(!0),[w,f]=b.useState(!1),[j,u]=b.useState(!1),[h,d]=b.useState({title:"",items:[]}),r=x.filter(p=>p.durum==="Aktif").map(p=>{var q;const T=(((q=p.serviceFeeSettings)==null?void 0:q.deviceSubscriptions)||[]).filter(Y=>Y.isActive&&Y.monthlyFee>0),F=T.length,L=T.reduce((Y,ce)=>Y+ce.monthlyFee,0),Q=F>0?L/F:0;return{customer:p,deviceCount:F,monthlyFee:L,revenuePerDevice:Q}}).filter(p=>p.deviceCount>0&&p.monthlyFee>0),m=r.reduce((p,D)=>p+D.deviceCount,0),a=r.reduce((p,D)=>p+D.monthlyFee,0),s=m>0?a/m:0,l=[...r].sort((p,D)=>D.revenuePerDevice-p.revenuePerDevice),t=l.slice(0,6),i=[...r].sort((p,D)=>p.revenuePerDevice-D.revenuePerDevice),c=i.slice(0,6),g=()=>{const p=l.map(D=>({label:D.customer.cariAdi||"Ä°simsiz MÃ¼ÅŸteri",value:`â‚¬${D.revenuePerDevice.toLocaleString("tr-TR",{minimumFractionDigits:2})} / cihaz`,badge:`${D.deviceCount} cihaz`,subtext:`Toplam: â‚¬${D.monthlyFee.toLocaleString("tr-TR")} / ay`,icon:e.jsx(se,{size:14,className:"text-green-600"})}));d({title:"En Ä°yi Cihaz/Gelir OranlarÄ±",items:p}),f(!0)},z=()=>{const p=i.map(D=>({label:D.customer.cariAdi||"Ä°simsiz MÃ¼ÅŸteri",value:`â‚¬${D.revenuePerDevice.toLocaleString("tr-TR",{minimumFractionDigits:2})} / cihaz`,badge:`${D.deviceCount} cihaz`,subtext:`Toplam: â‚¬${D.monthlyFee.toLocaleString("tr-TR")} / ay`,icon:e.jsx(Re,{size:14,className:"text-red-600"})}));d({title:"En DÃ¼ÅŸÃ¼k Cihaz/Gelir OranlarÄ±",items:p}),u(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"relative",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(W,{className:"text-sm",children:"Cihaz / Aidat Bedeli OranÄ±"}),e.jsx("div",{className:"flex gap-1",children:e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>S(!k),className:"h-8 w-8 p-0",children:k?e.jsx(O,{size:14}):e.jsx(G,{size:14})})})]}),k&&e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Es,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-purple-900",children:"Genel Oran"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-700 mb-1",children:"Toplam Cihaz"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx(As,{className:"h-3 w-3 text-purple-600"}),e.jsx("span",{className:"text-xl text-purple-900",children:m.toLocaleString("tr-TR")})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-700 mb-1",children:"Toplam Aidat (â‚¬)"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx(me,{className:"h-3 w-3 text-purple-600"}),e.jsxs("span",{className:"text-xl text-purple-900",children:["â‚¬",a.toLocaleString("tr-TR",{maximumFractionDigits:0})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-700 mb-1",children:"Cihaz BaÅŸÄ± (â‚¬)"}),e.jsx("div",{className:"flex items-baseline gap-1",children:e.jsxs("span",{className:"text-xl text-purple-900",children:["â‚¬",s.toLocaleString("tr-TR",{maximumFractionDigits:2})]})})]})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-green-600"}),e.jsx("h4",{className:"text-xs text-gray-700",children:"En Ä°yi Oranlar (Top 6)"})]}),l.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:g,className:"h-7 text-xs",children:[e.jsx(K,{size:12,className:"mr-1"}),"TÃ¼mÃ¼ (",l.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:t.map((p,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs(M,{variant:"outline",className:"text-xs shrink-0",children:["#",D+1]}),e.jsx("span",{className:"text-xs truncate",children:p.customer.cariAdi||"Ä°simsiz"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[e.jsxs(M,{className:"bg-green-600 text-white text-xs",children:["â‚¬",p.revenuePerDevice.toLocaleString("tr-TR",{maximumFractionDigits:2})," / cihaz"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[p.deviceCount," cihaz"]})]})]},p.customer.id))})]}),c.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 text-orange-600"}),e.jsx("h4",{className:"text-xs text-gray-700",children:"Dikkat Gereken Oranlar (Bottom 6)"})]}),i.length>6&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:z,className:"h-7 text-xs",children:[e.jsx(K,{size:12,className:"mr-1"}),"TÃ¼mÃ¼ (",i.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:c.map((p,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs(M,{variant:"outline",className:"text-xs shrink-0",children:["#",D+1]}),e.jsx("span",{className:"text-xs truncate",children:p.customer.cariAdi||"Ä°simsiz"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[e.jsxs(M,{className:"bg-orange-600 text-white text-xs",children:["â‚¬",p.revenuePerDevice.toLocaleString("tr-TR",{maximumFractionDigits:2})," / cihaz"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[p.deviceCount," cihaz"]})]})]},p.customer.id))})]}),r.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"Cihaz ve aidat bedeli bilgisi bulunan mÃ¼ÅŸteri yok"})]})})]}),e.jsx(U,{isOpen:w,onClose:()=>f(!1),title:h.title,items:h.items}),e.jsx(U,{isOpen:j,onClose:()=>u(!1),title:h.title,items:h.items})]})}function Pt({customers:x,bankPFRecords:N,payterProducts:v,banks:C,epkList:k,okList:S,mccList:w,salesReps:f,jobTitles:j,partnerships:u,sharings:h,kartProgramlar:d,hesapKalemleri:n,sabitKomisyonlar:r,ekGelirler:m,onCustomersChange:a,onBankPFRecordsChange:s,onPayterProductsChange:l,onMCCListChange:t,onBanksChange:i,onEPKListChange:c,onOKListChange:g,onSalesRepsChange:z,onJobTitlesChange:p,onPartnershipsChange:D,onSharingsChange:T,onKartProgramlarChange:F,onHesapKalemleriChange:L,onSabitKomisyonlarChange:Q,onEkGelirlerChange:q,onExportData:Y,onImportData:ce,onCheckData:he,onClearData:te}){const{widgets:R,addWidget:J,removeWidget:X,toggleWidget:ue,togglePinWidget:es,resetWidgets:ss,reorderWidgets:Ae,moveWidgetUp:ts,moveWidgetDown:as}=Xs(),[is,de]=b.useState(!1),[ae,Pe]=b.useState(0),[Be,Ee]=b.useState(!1),ls=b.useCallback(()=>{Ee(!0),Pe(o=>o+1),setTimeout(()=>Ee(!1),500)},[]);b.useEffect(()=>{const o=setInterval(()=>{console.log("ðŸ“Š Dashboard auto-refresh triggered"),Pe(_=>_+1)},3e4);return()=>clearInterval(o)},[]);const pe=[...R].sort((o,_)=>o.order-_.order),ie=pe.filter(o=>o.enabled),ve=ie.filter(o=>["customers","customerGrowth","sectorDiversity","mccDiversity","topCustomers","salesRepPerformance","riskDashboard"].includes(o.type)),fe=ie.filter(o=>["bankpf","bankPFMembers","bankPFUiySummary","bankPerformance"].includes(o.type)),be=ie.filter(o=>["products","systemStatus"].includes(o.type)),Ne=ie.filter(o=>["revenue","revenueTrend","subscriptionRevenue","deviceRevenueRatio"].includes(o.type));b.useCallback((o,_)=>{const ns=ie[o],ze=[...ie];ze.splice(o,1),ze.splice(_,0,ns),Ae(ze.map(rs=>rs.id))},[ie,Ae]);const ye=o=>{switch(o.type){case"customers":return e.jsx(Zs,{customers:x,payterProducts:v});case"bankpf":return e.jsx(Qs,{bankPFRecords:N,banks:C,epkList:k,okList:S});case"products":return e.jsx(st,{payterProducts:v,customers:x});case"revenue":return e.jsx(tt,{customers:x,payterProducts:v});case"customerGrowth":return e.jsx(at,{customers:x});case"sectorDiversity":return e.jsx(it,{customers:x,payterProducts:v});case"mccDiversity":return e.jsx(nt,{customers:x,payterProducts:v});case"bankPerformance":return e.jsx(rt,{customers:x,bankPFRecords:N,banks:C});case"bankPFMembers":return e.jsx(_s,{customers:x,bankPFRecords:N});case"bankPFUiySummary":return e.jsx(et,{customers:x,bankPFRecords:N,banks:C,epkList:k,okList:S});case"revenueTrend":return e.jsx(ct,{customers:x,payterProducts:v});case"salesRepPerformance":return e.jsx(dt,{customers:x,payterProducts:v});case"riskDashboard":return e.jsx(ot,{customers:x});case"topCustomers":return e.jsx(xt,{customers:x,payterProducts:v});case"systemStatus":return e.jsx(mt,{customers:x,bankPFRecords:N,payterProducts:v});case"subscriptionRevenue":return e.jsx(ht,{customers:x});case"deviceRevenueRatio":return e.jsx(ut,{customers:x,payterProducts:v});default:return null}},B=o=>{J(o)},E={customers:R.filter(o=>o.type==="customers").length,bankpf:R.filter(o=>o.type==="bankpf").length,bankPFMembers:R.filter(o=>o.type==="bankPFMembers").length,bankPFUiySummary:R.filter(o=>o.type==="bankPFUiySummary").length,products:R.filter(o=>o.type==="products").length,revenue:R.filter(o=>o.type==="revenue").length,customerGrowth:R.filter(o=>o.type==="customerGrowth").length,sectorDiversity:R.filter(o=>o.type==="sectorDiversity").length,mccDiversity:R.filter(o=>o.type==="mccDiversity").length,bankPerformance:R.filter(o=>o.type==="bankPerformance").length,revenueTrend:R.filter(o=>o.type==="revenueTrend").length,salesRepPerformance:R.filter(o=>o.type==="salesRepPerformance").length,riskDashboard:R.filter(o=>o.type==="riskDashboard").length,topCustomers:R.filter(o=>o.type==="topCustomers").length,systemStatus:R.filter(o=>o.type==="systemStatus").length,subscriptionRevenue:R.filter(o=>o.type==="subscriptionRevenue").length,deviceRevenueRatio:R.filter(o=>o.type==="deviceRevenueRatio").length};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(Is,{customers:x,onCustomersChange:a,payterProducts:v,onPayterProductsChange:l,bankPFRecords:N,onBankPFRecordsChange:s,hesapKalemleri:n,onHesapKalemleriChange:L,sabitKomisyonlar:r,onSabitKomisyonlarChange:Q,ekGelirler:m,onEkGelirlerChange:q,jobTitles:j,onJobTitlesChange:p,mccList:w,onMCCListChange:t,banks:C,onBanksChange:i,epkList:k,onEPKListChange:c,okList:S,onOKListChange:g,partnerships:u,onPartnershipsChange:D,sharings:h,onSharingsChange:T,kartProgramlar:d,onKartProgramlarChange:F,salesReps:f,onSalesRepsChange:z}),Y&&e.jsxs(y,{variant:"outline",size:"sm",className:"gap-2 hover:bg-green-50 hover:text-green-600 hover:border-green-300 transition-colors",onClick:Y,children:[e.jsx(gs,{size:16}),"JSON Export"]}),ce&&e.jsxs(y,{variant:"outline",size:"sm",className:"gap-2 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-300 transition-colors",onClick:ce,children:[e.jsx(js,{size:16}),"JSON Import"]}),he&&e.jsxs(y,{variant:"outline",size:"sm",className:"gap-2 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-colors",onClick:he,children:[e.jsx(ps,{size:16}),"Verileri Kontrol Et"]}),te&&e.jsxs(y,{variant:"outline",size:"sm",className:"gap-2 hover:bg-red-50 hover:text-red-600 hover:border-red-300 transition-colors",onClick:te,children:[e.jsx(Oe,{size:16}),"TÃ¼m Verileri Temizle"]}),e.jsxs(y,{variant:"outline",size:"sm",className:"gap-2",onClick:ls,disabled:Be,children:[e.jsx(_e,{size:16,className:Be?"animate-spin":""}),"Yenile"]}),e.jsxs(qe,{open:is,onOpenChange:de,children:[e.jsx(vs,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget YÃ¶netimi"]})}),e.jsxs(Je,{className:"max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsxs(Xe,{children:[e.jsx(Ze,{children:"Widget YÃ¶netimi"}),e.jsx(fs,{children:"Widget'larÄ± ekleyin, kaldÄ±rÄ±n veya gÃ¶rÃ¼nÃ¼rlÃ¼klerini ayarlayÄ±n"})]}),e.jsxs("div",{className:"space-y-6 mt-4 overflow-y-auto flex-1 pr-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Yeni Widget Ekle"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("customers"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"MÃ¼ÅŸteriler Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.customers," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("bankpf"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Banka/PF Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.bankpf," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("bankPFMembers"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Banka/PF ÃœÄ°Y Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.bankPFMembers," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("bankPFUiySummary"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"ÃœÄ°Y Ä°cmal Tablosu"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.bankPFUiySummary," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("products"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"ÃœrÃ¼n Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.products," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("revenue"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Gelir Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.revenue," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("customerGrowth"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"MÃ¼ÅŸteri BÃ¼yÃ¼me"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.customerGrowth," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("sectorDiversity"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"SektÃ¶r Ã‡eÅŸitliliÄŸi"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.sectorDiversity," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("mccDiversity"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"MCC Ã‡eÅŸitliliÄŸi"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.mccDiversity," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("bankPerformance"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Banka PerformansÄ±"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.bankPerformance," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("revenueTrend"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Gelir Trendi"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.revenueTrend," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("salesRepPerformance"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Temsilci PerformansÄ±"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.salesRepPerformance," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("riskDashboard"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Risk Dashboard'u"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.riskDashboard," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("topCustomers"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Top 10 MÃ¼ÅŸteriler"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.topCustomers," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("systemStatus"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Sistem Durumu"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.systemStatus," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("subscriptionRevenue"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Abone Hizmet Bedeli Ã–zeti"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.subscriptionRevenue," mevcut"]})]})]}),e.jsxs(y,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>B("deviceRevenueRatio"),children:[e.jsx(I,{size:16}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Cihaz / Aidat Bedeli OranÄ±"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.deviceRevenueRatio," mevcut"]})]})]})]})]}),e.jsx(He,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Mevcut Widget'lar"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(re,{size:12,className:"text-blue-600"}),e.jsx("span",{children:"SabitlenmiÅŸ widget'lar her zaman gÃ¶rÃ¼nÃ¼r ve en Ã¼sttedir"})]})]}),pe.length===0?e.jsx(A,{children:e.jsxs(P,{className:"py-8 text-center text-gray-500",children:[e.jsx(Ue,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"HenÃ¼z widget eklenmemiÅŸ"})]})}):e.jsx("div",{className:"space-y-2",children:pe.map((o,_)=>e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${o.pinned?"bg-blue-50 border-blue-300":o.enabled?"bg-white border-gray-200":"bg-gray-50 border-gray-200 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:o.pinned||o.enabled?"default":"secondary",className:`w-20 justify-center ${o.pinned?"bg-blue-600":""}`,children:o.pinned?"ðŸ“Œ Sabit":o.enabled?"Aktif":"Gizli"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-xs text-gray-400 w-6 text-center",children:["#",_+1]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[o.title,o.pinned&&e.jsx(re,{size:14,className:"text-blue-600"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",o.id]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>es(o.id),className:`gap-2 ${o.pinned?"text-blue-600 hover:text-blue-700 hover:bg-blue-100":""}`,title:o.pinned?"Sabitlemeyi KaldÄ±r":"Sabitle",children:o.pinned?e.jsxs(e.Fragment,{children:[e.jsx(Vs,{size:14}),"KaldÄ±r"]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{size:14}),"Sabitle"]})}),e.jsxs("div",{className:"flex items-center gap-1 border-r pr-2",children:[e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>ts(o.id),disabled:_===0,className:"gap-1 px-2",title:"SÄ±ra YÃ¼kselt",children:[e.jsx(Hs,{size:14}),"YukarÄ±"]}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>as(o.id),disabled:_===pe.length-1,className:"gap-1 px-2",title:"SÄ±ra Ä°ndir",children:[e.jsx($s,{size:14}),"AÅŸaÄŸÄ±"]})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>ue(o.id),className:"gap-2",disabled:o.pinned&&o.enabled,title:o.pinned&&o.enabled?"SabitlenmiÅŸ widget gizlenemez":"",children:o.enabled?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{size:14}),"Gizle"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ws,{size:14}),"GÃ¶ster"]})}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>X(o.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 gap-2",disabled:o.pinned,title:o.pinned?"SabitlenmiÅŸ widget silinemez":"",children:[e.jsx(Oe,{size:14}),"Sil"]})]})]},o.id))})]}),e.jsx(He,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"VarsayÄ±lana DÃ¶n"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"TÃ¼m widget'larÄ± varsayÄ±lan ayarlara dÃ¶ndÃ¼rÃ¼r"})]}),e.jsx(y,{variant:"outline",onClick:ss,children:"SÄ±fÄ±rla"})]})]})]})]})]})}),ie.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(P,{className:"py-16 text-center",children:[e.jsx(Ue,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"HenÃ¼z aktif widget yok"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Widget yÃ¶netimi menÃ¼sÃ¼nden widget'larÄ± etkinleÅŸtirin veya yeni widget'lar ekleyin"}),e.jsxs(y,{onClick:()=>de(!0),className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget YÃ¶netimi"]})]})}):e.jsxs(bs,{defaultValue:"customers",className:"w-full",children:[e.jsxs(Ns,{className:"grid w-full grid-cols-4",children:[e.jsxs(ke,{value:"customers",className:"gap-2",children:[e.jsx(ee,{size:16}),"MÃ¼ÅŸteriler",ve.length>0&&e.jsx(M,{variant:"secondary",className:"ml-1",children:ve.length})]}),e.jsxs(ke,{value:"bankpf",className:"gap-2",children:[e.jsx(ee,{size:16}),"Banka/PF",fe.length>0&&e.jsx(M,{variant:"secondary",className:"ml-1",children:fe.length})]}),e.jsxs(ke,{value:"products",className:"gap-2",children:[e.jsx(ee,{size:16}),"ÃœrÃ¼n",be.length>0&&e.jsx(M,{variant:"secondary",className:"ml-1",children:be.length})]}),e.jsxs(ke,{value:"revenue",className:"gap-2",children:[e.jsx(ee,{size:16}),"Gelir",Ne.length>0&&e.jsx(M,{variant:"secondary",className:"ml-1",children:Ne.length})]})]}),e.jsx(Ce,{value:"customers",className:"mt-6",children:ve.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(P,{className:"py-16 text-center",children:[e.jsx(ee,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"MÃ¼ÅŸteri widget'Ä± yok"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Widget yÃ¶netiminden mÃ¼ÅŸteri kategorisi widget'larÄ±nÄ± ekleyin"}),e.jsxs(y,{onClick:()=>de(!0),className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget Ekle"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:ve.map(o=>e.jsxs("div",{className:`
                        ${o.size==="large"?"lg:col-span-2":"lg:col-span-1"}
                        ${o.pinned?"relative":""}
                      `,children:[o.pinned&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10 bg-blue-600 text-white rounded-full p-1.5 shadow-lg",children:e.jsx(re,{size:14})}),ye(o)]},`${o.id}-${ae}`))},ae)}),e.jsx(Ce,{value:"bankpf",className:"mt-6",children:fe.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(P,{className:"py-16 text-center",children:[e.jsx(ee,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Banka/PF widget'Ä± yok"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Widget yÃ¶netiminden banka/PF kategorisi widget'larÄ±nÄ± ekleyin"}),e.jsxs(y,{onClick:()=>de(!0),className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget Ekle"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:fe.map(o=>e.jsxs("div",{className:`
                        ${o.size==="large"?"lg:col-span-2":"lg:col-span-1"}
                        ${o.pinned?"relative":""}
                      `,children:[o.pinned&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10 bg-blue-600 text-white rounded-full p-1.5 shadow-lg",children:e.jsx(re,{size:14})}),ye(o)]},`${o.id}-${ae}`))},ae)}),e.jsx(Ce,{value:"products",className:"mt-6",children:be.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(P,{className:"py-16 text-center",children:[e.jsx(ee,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"ÃœrÃ¼n widget'Ä± yok"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Widget yÃ¶netiminden Ã¼rÃ¼n kategorisi widget'larÄ±nÄ± ekleyin"}),e.jsxs(y,{onClick:()=>de(!0),className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget Ekle"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:be.map(o=>e.jsxs("div",{className:`
                        ${o.size==="large"?"lg:col-span-2":"lg:col-span-1"}
                        ${o.pinned?"relative":""}
                      `,children:[o.pinned&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10 bg-blue-600 text-white rounded-full p-1.5 shadow-lg",children:e.jsx(re,{size:14})}),ye(o)]},`${o.id}-${ae}`))},ae)}),e.jsx(Ce,{value:"revenue",className:"mt-6",children:Ne.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(P,{className:"py-16 text-center",children:[e.jsx(ee,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Gelir widget'Ä± yok"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Widget yÃ¶netiminden gelir kategorisi widget'larÄ±nÄ± ekleyin"}),e.jsxs(y,{onClick:()=>de(!0),className:"gap-2",children:[e.jsx(oe,{size:16}),"Widget Ekle"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Ne.map(o=>e.jsxs("div",{className:`
                        ${o.size==="large"?"lg:col-span-2":"lg:col-span-1"}
                        ${o.pinned?"relative":""}
                      `,children:[o.pinned&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10 bg-blue-600 text-white rounded-full p-1.5 shadow-lg",children:e.jsx(re,{size:14})}),ye(o)]},`${o.id}-${ae}`))},ae)})]})]})})}export{Pt as DashboardHome};
